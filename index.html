<!DOCTYPE HTML>
<!--
	Hyperspace by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
	
	Modified by Andreas Grech
-->
<html lang="en-GB">
	<head>
		<title>jsBotArena - Write autonomous robots in JavaScript for a fight to the death!</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>

		<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@3.7.0/dist/jquery.min.js"></script>
		
		<!--<script type="module" src="./scripts/lib/browser-fs-access@0.34.1/index.js"></script>-->
		<script type="module">
			import {
				fileOpen,
				// directoryOpen,
				// fileSave,
				// supported
			} from './scripts/lib/browser-fs-access@0.34.1/index.js';
			
			$(function(){
				$("#addRobot").click(async function(){
					let filesHandles;
					try {
						filesHandles = await fileOpen([
							{
								description: 'JavaScript files',
								// mimeTypes: ['text/*'],
								mimeTypes: ['text/javascript', 'text/plain'],
								extensions: ['.js'],
								multiple: true,
							}
						]);
					}
					catch (err) {
						Logger.error(err);
						// if (err.name !== 'AbortError') {
						// 	return console.error(err);
						// }
						return;
					}
					
					for (const filesHandle of filesHandles) {
						const filename = filesHandle.name;
						const fileSize = filesHandle.size;
						Logger.log(`Reading file: ${filename} (${fileSize} bytes)`);
						
						let text;
						try {
							// Read the text from the file
							text = await filesHandle.text();
						} catch (err) {
							Logger.log(`Unable to read text: ${filename} (${fileSize} bytes). Exception: ${err}`);
							continue;
						}

						// Create a function around the robot script so that it has it's own scope.
						const robotDefinitionClosureFunction = new Function(text);
						
						// Execute this function so that the robot script is evaluated.
						robotDefinitionClosureFunction();
						
						// The robot script should have added it's type definition function to the RobotLoader.
						// So check if it's there.
						const robotDefinitionFunction = RobotLoader.lastAddedRobotDefinitionFunction;
						if (robotDefinitionFunction === undefined) {
							Logger.error(`Robot script did not add its type definition function to the RobotLoader: ${filename}`);
							continue;
						}
						
						// Reset the loader so that it can be used again since now we have a reference to the robot type definition function.
						RobotLoader.resetLoader();
						
						try {
							// Create an instance of the robot so that we make sure that it's a valid robot type
							const robotInstance = robotDefinitionFunction();
							const robotName = robotInstance.name;
							if (!robotName){
								Logger.error(`Robot instance must have a .name field defined: ${filename}`);
								continue;
							}
							
							// Add the robot to the game
							RobotManager.addRobot(robotInstance);

							Logger.log("Successfully created robot instance", robotInstance);
						} catch (err){
							Logger.error(`Robot script did not return a valid robot instance: ${filename} (Exception: ${err})`);
							continue;
						}
					}
				});
			});
		</script>
		
		

		<!-- Template Scripts -->
		<script src="assets/js/jquery.scrollex.min.js"></script>
		<script src="assets/js/jquery.scrolly.min.js"></script>
		<script src="assets/js/browser.min.js"></script>
		<script src="assets/js/breakpoints.min.js"></script>
		<script src="assets/js/htmltemplate-util.js"></script>
		<script src="assets/js/htmltemplate-main.js"></script>
		<!-- Template Scripts -->
		
		<!--<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>-->
		<script type="text/javascript" src="./scripts/lib/phaser@3.60.0.js"></script>
		<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/phaser-raycaster@0.10.9/dist/phaser-raycaster.min.js"></script>
		<!--<script type="text/javascript" src="./scripts/lib/phaser-raycaster@0.10.9.js"></script>-->

		<!--<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/rbush@3.0.1/rbush.min.js"></script>-->
		<script type="text/javascript" src="./scripts/lib/rbush@3.0.1.js"></script>
		<!--<script src="https://cdn.jsdelivr.net/npm/tweakpane@3.1.9/dist/tweakpane.js"></script>-->
		<script src="./scripts/lib/tweakpane@3.1.9.js"></script>
		<!--<script src="https://cdn.jsdelivr.net/npm/phaser-plugin-inspector@2.0.0-2/dist/phaser-plugin-inspector.umd.js"></script>-->
		<script src="./scripts/lib/phaser-plugin-inspector@2.0.0-2.umd.js"></script>

		<!-- Pathfinding is currently used by the pathfinding robot -->
		<script src="https://cdn.jsdelivr.net/npm/pathfinding@0.4.18/visual/lib/pathfinding-browser.min.js"></script>
		<!-- Pathfinding is currently used by the pathfinding robot -->

		<!--<script type="text/javascript" src="./scripts/lib/xxhash.min.js"></script>-->

		<script type="text/javascript" src="./scripts/EnumOperations.js"></script>
		<script type="text/javascript" src="./scripts/BitmaskableObjectOperations.js"></script>
		<script type="text/javascript" src="./scripts/JSObjectOperations.js"></script>
		<script type="text/javascript" src="./scripts/JSONDatabaseReader.js"></script>
		<script type="text/javascript" src="./scripts/Enums.js"></script>
		<script type="text/javascript" src="./scripts/Logger.js"></script>
		<script type="text/javascript" src="./scripts/MathOperations.js"></script>
		<script type="text/javascript" src="./scripts/NumberOperations.js"></script>
		<script type="text/javascript" src="./scripts/FrameCounter.js"></script>
		<script type="text/javascript" src="./scripts/FilePathOperations.js"></script>
		<script type="text/javascript" src="./scripts/CollisionCategories.js"></script>
		<script type="text/javascript" src="./scripts/PhysicsHelperFunctions.js"></script>
		<script type="text/javascript" src="./scripts/AngleOperations.js"></script>
		<script type="text/javascript" src="./scripts/RobotOperationsTypes.js"></script>

		<script type="text/javascript" src="./scripts/GameContextHolder.js"></script>
		<script type="text/javascript" src="./scripts/GameObjectDepths.js"></script>

		<script type="text/javascript" src="./scripts/pools/PoolManager.js"></script>
		<script type="text/javascript" src="./scripts/pools/GameObjectPoolsManager.js"></script>
		<script type="text/javascript" src="./scripts/pools/MatterGameObjectPoolManager.js"></script>

		<script type="text/javascript" src="./scripts/RobotQueries.js"></script>
		<script type="text/javascript" src="./scripts/MatterPhysicsOperations.js"></script>
		<script type="text/javascript" src="./scripts/RobotsData.js"></script>
		<script type="text/javascript" src="./scripts/RobotOperations.js"></script>
		<script type="text/javascript" src="./scripts/RobotAPIFactory.js"></script>
		<script type="text/javascript" src="./scripts/RobotsBoundsOperations.js"></script>
		<script type="text/javascript" src="./scripts/UIRobotInfoPanel.js"></script>
		<script type="text/javascript" src="./scripts/RobotMatterFactory.js"></script>
		<script type="text/javascript" src="./scripts/GameSetup.js"></script>
		<script type="text/javascript" src="./scripts/RobotSetup.js"></script>

		<!-- Databases -->
		<script type="text/javascript" src="./scripts/Databases/ImageDatabase.js"></script>
		<script type="text/javascript" src="./scripts/Databases/AnimationSpritesDatabase.js"></script>
		<script type="text/javascript" src="./scripts/Databases/RobotPartsDatabase.js"></script>
		<script type="text/javascript" src="./scripts/Databases/ProjectilesDatabase.js"></script>
		<script type="text/javascript" src="./scripts/Databases/ArenasDatabase.js"></script>

		<!-- Game Managers -->
		<script type="text/javascript" src="./scripts/Managers/TweakPaneManager.js"></script>
		<script type="text/javascript" src="./scripts/Managers/RaycastManager.js"></script>
		<script type="text/javascript" src="./scripts/Managers/PhysicsBodiesManager.js"></script>
		<script type="text/javascript" src="./scripts/Managers/ArenaManager.js"></script>
		<script type="text/javascript" src="./scripts/Managers/AnimationManager.js"></script>
		<script type="text/javascript" src="./scripts/Managers/ObjectAnchorManager.js"></script>
		<script type="text/javascript" src="./scripts/Managers/RobotManager.js"></script>
		<script type="text/javascript" src="./scripts/Managers/RobotLoader.js"></script>
		<script type="text/javascript" src="./scripts/Managers/RobotsRadarManager.js"></script>
		<script type="text/javascript" src="./scripts/Managers/UIManager.js"></script>
		<script type="text/javascript" src="./scripts/Managers/DamageManager.js"></script>
		<script type="text/javascript" src="./scripts/Managers/ProjectileManager.js"></script>
		<script type="text/javascript" src="./scripts/Managers/CollisionManager.js"></script>

		<!-- Starting point -->
		<script type="text/javascript" src="./scripts/Main.js"></script>

		<!--
		<script type="text/javascript" src="./scripts/ExampleRobots/circleBot_robot.js"></script>
		<script type="text/javascript" src="./scripts/ExampleRobots/cornerGuardBot_robot.js"></script>
		<script type="text/javascript" src="./scripts/ExampleRobots/doNothingBot_robot.js"></script>
		<script type="text/javascript" src="./scripts/ExampleRobots/followBot_followAngle_robot.js"></script>
		<script type="text/javascript" src="./scripts/ExampleRobots/followBot_followPosition_robot.js"></script>
		<script type="text/javascript" src="./scripts/ExampleRobots/keyBot_robot.js"></script>
		<script type="text/javascript" src="./scripts/ExampleRobots/shredder_robot.js"></script>
		<script type="text/javascript" src="./scripts/ExampleRobots/sittingBot_robot.js"></script>
		<script type="text/javascript" src="./scripts/ExampleRobots/sniperBot_robot.js"></script>
		<script type="text/javascript" src="./scripts/ExampleRobots/stealthBot_robot.js"></script>
		<script type="text/javascript" src="./scripts/ExampleRobots/apiUsageExampleBot_robot.js"></script>
		<script type="text/javascript" src="./scripts/ExampleRobots/astarBot_robot.js"></script>
		-->
	</head>
	<body class="is-preload">

		<!-- Sidebar -->
			<section id="sidebar">
				<div class="inner">
					<nav>
						<ul>
							<li><a href="#intro">Play</a></li>
							<li><a href="#one">Options</a></li>
							<li><a href="#two">Your first robot</a></li>
							<li><a href="#three">Sample bots</a></li>
							<li><a href="#four">API</a></li>
						</ul>
					</nav>
				</div>
			</section>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Intro -->
					<section id="intro" class="wrapper style1 fullscreen fade-up">
						<div class="inner">
							<h1>jsBotArena</h1>
							<p>Write autonomous robots in JavaScript for a fight to the death.  Best programmer wins.<br />
								<b>Source code: </b><a href="https://github.com/dreasgrech/jsBotArena" target="_blank">https://github.com/dreasgrech/jsBotArena</a>.</p>
							<ul class="actions">
								<li><a id="addRobot" href="#" class="button scrolly">Add robots</a></li>
							</ul>
							<div id="game_container">
								
							</div>
						</div>
					</section>

				<!-- One -->
					<section id="one" class="wrapper style2 spotlights">
						<section>
							<a href="#" class="image"><img src="assets/images/pic01.jpg" alt="" data-position="center center" /></a>
							<div class="content">
								<div class="inner">
									<h2>Sed ipsum dolor</h2>
									<p>Phasellus convallis elit id ullamcorper pulvinar. Duis aliquam turpis mauris, eu ultricies erat malesuada quis. Aliquam dapibus.</p>
									<ul class="actions">
										<li><a href="generic.html" class="button">Learn more</a></li>
									</ul>
								</div>
							</div>
						</section>
						<section>
							<a href="#" class="image"><img src="assets/images/pic02.jpg" alt="" data-position="top center" /></a>
							<div class="content">
								<div class="inner">
									<h2>Feugiat consequat</h2>
									<p>Phasellus convallis elit id ullamcorper pulvinar. Duis aliquam turpis mauris, eu ultricies erat malesuada quis. Aliquam dapibus.</p>
									<ul class="actions">
										<li><a href="generic.html" class="button">Learn more</a></li>
									</ul>
								</div>
							</div>
						</section>
						<section>
							<a href="#" class="image"><img src="assets/images/pic03.jpg" alt="" data-position="25% 25%" /></a>
							<div class="content">
								<div class="inner">
									<h2>Ultricies aliquam</h2>
									<p>Phasellus convallis elit id ullamcorper pulvinar. Duis aliquam turpis mauris, eu ultricies erat malesuada quis. Aliquam dapibus.</p>
									<ul class="actions">
										<li><a href="generic.html" class="button">Learn more</a></li>
									</ul>
								</div>
							</div>
						</section>
					</section>

				<!-- Two -->
					<section id="two" class="wrapper style3 fade-up">
						<div class="inner">
							<h2>What we do</h2>
							<p>Phasellus convallis elit id ullamcorper pulvinar. Duis aliquam turpis mauris, eu ultricies erat malesuada quis. Aliquam dapibus, lacus eget hendrerit bibendum, urna est aliquam sem, sit amet imperdiet est velit quis lorem.</p>
							<div class="features">
								<section>
									<span class="icon solid major fa-code"></span>
									<h3>Lorem ipsum amet</h3>
									<p>Phasellus convallis elit id ullam corper amet et pulvinar. Duis aliquam turpis mauris, sed ultricies erat dapibus.</p>
								</section>
								<section>
									<span class="icon solid major fa-lock"></span>
									<h3>Aliquam sed nullam</h3>
									<p>Phasellus convallis elit id ullam corper amet et pulvinar. Duis aliquam turpis mauris, sed ultricies erat dapibus.</p>
								</section>
								<section>
									<span class="icon solid major fa-cog"></span>
									<h3>Sed erat ullam corper</h3>
									<p>Phasellus convallis elit id ullam corper amet et pulvinar. Duis aliquam turpis mauris, sed ultricies erat dapibus.</p>
								</section>
								<section>
									<span class="icon solid major fa-desktop"></span>
									<h3>Veroeros quis lorem</h3>
									<p>Phasellus convallis elit id ullam corper amet et pulvinar. Duis aliquam turpis mauris, sed ultricies erat dapibus.</p>
								</section>
								<section>
									<span class="icon solid major fa-link"></span>
									<h3>Urna quis bibendum</h3>
									<p>Phasellus convallis elit id ullam corper amet et pulvinar. Duis aliquam turpis mauris, sed ultricies erat dapibus.</p>
								</section>
								<section>
									<span class="icon major fa-gem"></span>
									<h3>Aliquam urna dapibus</h3>
									<p>Phasellus convallis elit id ullam corper amet et pulvinar. Duis aliquam turpis mauris, sed ultricies erat dapibus.</p>
								</section>
							</div>
							<ul class="actions">
								<li><a href="generic.html" class="button">Learn more</a></li>
							</ul>
						</div>
					</section>

				<!-- Three -->
					<section id="three" class="wrapper style1 fade-up">
						<div class="inner">
							<h2>Get in touch</h2>
							<p>Phasellus convallis elit id ullamcorper pulvinar. Duis aliquam turpis mauris, eu ultricies erat malesuada quis. Aliquam dapibus, lacus eget hendrerit bibendum, urna est aliquam sem, sit amet imperdiet est velit quis lorem.</p>
							<div class="split style1">
								<section>
									<form method="post" action="#">
										<div class="fields">
											<div class="field half">
												<label for="name">Name</label>
												<input type="text" name="name" id="name" />
											</div>
											<div class="field half">
												<label for="email">Email</label>
												<input type="text" name="email" id="email" />
											</div>
											<div class="field">
												<label for="message">Message</label>
												<textarea name="message" id="message" rows="5"></textarea>
											</div>
										</div>
										<ul class="actions">
											<li><a href="" class="button submit">Send Message</a></li>
										</ul>
									</form>
								</section>
								<section>
									<ul class="contact">
										<li>
											<h3>Address</h3>
											<span>12345 Somewhere Road #654<br />
											Nashville, TN 00000-0000<br />
											USA</span>
										</li>
										<li>
											<h3>Email</h3>
											<a href="#">user@untitled.tld</a>
										</li>
										<li>
											<h3>Phone</h3>
											<span>(000) 000-0000</span>
										</li>
										<li>
											<h3>Social</h3>
											<ul class="icons">
												<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
												<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
												<li><a href="#" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
												<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
												<li><a href="#" class="icon brands fa-linkedin-in"><span class="label">LinkedIn</span></a></li>
											</ul>
										</li>
									</ul>
								</section>
							</div>
						</div>
					</section>
					<section id="four" class="wrapper style1 fade-up">
						<div class="inner">
							<h2>Get in touch</h2>
							<p>Phasellus convallis elit id ullamcorper pulvinar. Duis aliquam turpis mauris, eu ultricies erat malesuada quis. Aliquam dapibus, lacus eget hendrerit bibendum, urna est aliquam sem, sit amet imperdiet est velit quis lorem.</p>
						</div>
					</section>

			</div>

		<!-- Footer -->
			<footer id="footer" class="wrapper style1-alt">
				<div class="inner">
					<ul class="menu">
						<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</div>
			</footer>

	</body>
</html>
