<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.15.1/dist/phaser-arcade-physics.js"></script>
</head>
<body>

<script>
    var GAME_WIDTH = 1024,
        GAME_HEIGHT = 1024;

    var config = {
        type: Phaser.AUTO,
        width: GAME_WIDTH,
        height: GAME_HEIGHT,
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };

    var gameContext;

    var game = new Phaser.Game(config);

    function preload () {
        gameContext = this;

        // var floor = this.load.image('arena_floor', 'images/arena_floor.png');
        this.load.image('floor_image', 'images/Floor - Dirt 2 64x64.png');
        this.load.image('wall_image', 'images/Wall - Brick 2 64x64.png');

        this.load.tilemapTiledJSON('arena_json', 'arena_map.json');
    }

    function create () {
        /*
            var floorImage = this.textures.get('arena_floor').getSourceImage();
            var floorImageWidth = floorImage.width;
            var floorImageHeight = floorImage.height;
    
            console.log(floorImageWidth);
            console.log(floorImageHeight);
    
            var posX = 0, posY = 0;
            var floor = this.add.tileSprite(posX, posY, GAME_WIDTH, GAME_HEIGHT, "arena_floor");
            floor.setOrigin(0, 0);
        */

        //this.add.image(0, 0, 'floor');
        var map = this.make.tilemap({ key: 'arena_json' });

        var floorTilesetImage = map.addTilesetImage('Floor', 'floor_image');
        var wallTilesetImage = map.addTilesetImage('Walls', 'wall_image');

        var floorLayer = map.createStaticLayer('Floor Layer', floorTilesetImage);
        var wallsLayer = map.createStaticLayer('Walls Layer', wallTilesetImage);

        // Set collision on the walls
        wallsLayer.setCollisionByProperty({ collides: true });

        helperFunctions.showDebugLayerCollisions(wallsLayer);
    }

    function update ()
    {
    }

    var helperFunctions = (function() {

        // Shows collision on a layer with a different color for debugging.
        var showDebugLayerCollisions = function(layer) {
            var debugGraphics = gameContext.add.graphics().setAlpha(0.75);
            layer.renderDebug(debugGraphics,
                {
                    tileColor: null, // Color of non-colliding tiles
                    collidingTileColor: new Phaser.Display.Color(243, 134, 48, 255), // Color of colliding tiles
                    faceColor: new Phaser.Display.Color(40, 39, 37, 255) // Color of colliding face edges
                });
        };

        return {
            showDebugLayerCollisions: showDebugLayerCollisions
        };
    }());
</script>

</body>
</html>